{"componentChunkName":"component---src-templates-post-js","path":"/user-input-synthetic-data/","result":{"data":{"ghostPost":{"id":"Ghost__Post__61a68d091b683e0048b2a2f3","title":"User input to enhance synthetic data generation","slug":"user-input-synthetic-data","featured":false,"feature_image":"https://sdv.ghost.io/content/images/2021/11/Banner.png","excerpt":"ML models learn some rules out of the box, while other logic requires more work. Which is which? Read more to find out.","custom_excerpt":"ML models learn some rules out of the box, while other logic requires more work. Which is which? Read more to find out.","visibility":"public","created_at_pretty":"30 November, 2021","published_at_pretty":"01 December, 2021","updated_at_pretty":"02 December, 2021","created_at":"2021-11-30T15:43:53.000-05:00","published_at":"2021-12-01T11:06:49.000-05:00","updated_at":"2021-12-02T18:23:08.000-05:00","meta_title":"User input to enhance synthetic data generation","meta_description":"ML models learn some rules out of the box, while other logic requires more work. Which is which? Read more to find out.","og_description":null,"og_image":null,"og_title":null,"twitter_description":"ML models learn some rules out of the box, while other logic requires more work. Which is which? Read more to find out.","twitter_image":"https://sdv.ghost.io/content/images/2021/11/Banner-1.png","twitter_title":"User input to enhance synthetic data generation","authors":[{"name":"Neha Patki","slug":"neha","bio":"Neha first created the SDV for her Master's thesis at MIT and also has experience in Product Management from Google. She is excited to use her expertise to build a great SDV user experience.","profile_image":"https://sdv.ghost.io/content/images/2021/05/Neha_Patki--1-.jpg","twitter":"@n4atki","facebook":null,"website":"https://www.linkedin.com/in/nehapatki/"}],"primary_author":{"name":"Neha Patki","slug":"neha","bio":"Neha first created the SDV for her Master's thesis at MIT and also has experience in Product Management from Google. She is excited to use her expertise to build a great SDV user experience.","profile_image":"https://sdv.ghost.io/content/images/2021/05/Neha_Patki--1-.jpg","twitter":"@n4atki","facebook":null,"website":"https://www.linkedin.com/in/nehapatki/"},"primary_tag":{"name":"Product","slug":"product","description":"This blog focuses on the value that synthetic data brings to business. Our users have successfully used the SDV to augment datasets, test applications, remove bias and more. Explore new use cases, concepts and case studies.","feature_image":null,"meta_description":null,"meta_title":null,"visibility":"public"},"tags":[{"name":"Product","slug":"product","description":"This blog focuses on the value that synthetic data brings to business. Our users have successfully used the SDV to augment datasets, test applications, remove bias and more. Explore new use cases, concepts and case studies.","feature_image":null,"meta_description":null,"meta_title":null,"visibility":"public"}],"plaintext":"In our previous article [https://sdv.dev/blog/fake-to-synthetic-ml], we explored\nhow machine learning (ML) plays a key role in synthetic data creation. One of\nthe biggest strengths of ML is automatic rule detection (also known in ML terms\nas correlations): The algorithms are designed to learn patterns in the data,\neven without additional user input. The result is synthetic data that resembles\nthe original, right down to its mathematical properties!\n\nHowever, in some cases, applying an ML model right out of the box may not\nimmediately achieve the desired result. In this article, we'll explore the\nstrengths of ML models and go through those areas where user input may be\nrequired.\n\nStrengths of ML Models\nThe goal of any ML-based synthetic data generation software is to learn from and\nemulate the input data. To illustrate this, let's pretend you work in the car\ninsurance business, and you're in possession of a real dataset related to\ndrivers and their insurance:\n\nAn example dataset, including license and collision coverage information\nassociated with different drivers.An ML-based system, such as the Synthetic Data Vault\n[https://sdv.dev/blog/intro-to-sdv/] (SDV), will learn patterns from the real\ndata and use it to create new synthetic data. Recall some of the important\npatterns that ML algorithms detect:\n\n * Shapes. The general shape of the data. For example, in the dataset above, 50%\n   of drivers have Collision Coverage and the Annual Premium is uniformly\n   scattered between $3,000 and $9,000.\n * Correlations. The trends within the data. For example, having Collision\n   Coverage -- especially Standard coverage -- means a higher Annual Premium.\n\nThese shapes and correlations will be present in the synthetic data that is\noutputted by the ML model, as shown below.\n\nAn example of a synthetic dataset created by an ML-based algorithm. The\nalgorithm will learn patterns from the real data and emulate them.Perhaps the single biggest strength of an ML algorithm is its ability to learn\nrules by looking for general patterns in the data, using probability and\nstatistics.\n\nWhat ML models do not learn out of the box\nLet's take a closer look at the synthetic car insurance data. You might notice\nthat two of the rows in the synthetic data don't make complete sense. Below,\nwe've highlighted the errors.\n\nThe synthetic car insurance data, with errors highlighted.Do you see what has\ngone wrong? In the first row, the license expired 3 years earlier than it was\nissued. In the last row, a driver without Collision Coverage has a Collision\nPolicy Type. Additionally, the same Customer ID has been repeated in Row 3 and\nRow 4.\n\nThere are three rules that the ML algorithm did not follow:\n\n 1. License Expiration > License Issue Year\n 2. If Has Collision Coverage = NO, then Collision Policy Type must be empty\n 3. All Customer IDs must be unique\n\nWhy does the ML model easily pick up on some rules and not others? To answer\nthis question, we can look closely at the rules themselves. All of the rules\nthat the ML model successfully learned -- including the distribution shapes and\nthe correlations -- were based on general trends. These probabilistic rules \napply to a majority of the relationships within the dataset, but not all of\nthem. Although they have to make sense in aggregate, a few rows may be\nexceptions.\n\nBy contrast, the rules that the ML model failed to learn were stricter. These \ndeterministic rules describe intrinsic laws of nature, time or logic. Each and\nevery row must adhere to them, and they won't change regardless of  how much (or\nhow little) data has been given to the ML model.\n\nTo continue with the driving theme: A probabilistic rule is like a yield sign,\nsignaling a general recommendation that works out differently for each\nindividual situation -- some cars may need to stop, while others just slow down.\nMeanwhile, a deterministic rule is like a stop sign, demanding that every single\ncar must come to a full stop.\n\nA probabilistic rule applies to a majority of rows, but leaves room for\nexceptions. Meanwhile, a deterministic rule applies to every single row.By\ndefault, our ML model assumed that all rules were probabilistic. When this\nhappens, synthetic data still generally follows the desired properties -- for\nexample, License Expiration > License Issue Year -- for most of the rows, but\nnot for every row.\n\nImproving the ML Models using constraints\nJust because the ML model didn't automatically follow a deterministic rule\ndoesn't mean that it can't. It's possible to improve the model so that it\nunderstands this type of rule. As a user working with the SDV, you can input\ndeterministic rules into your model using constraints.\n\nAn ML model built using constraints will accommodate both probabilistic and\ndeterministic rules.\n\nDo you need SDV constraints?\n\nDeterministic rules are often easy to spot in your dataset: They are the rules\nthat every single row must follow in order to be valid, regardless of how much\ndata there is overall.  But even if you identify the right constraints, there\nare some cases where you might not actually want to supply them to the SDV.\n\nBecause the SDV learns probabilistic rules, most of the synthesized data is\ngenerally valid. Having a few errors sprinkled in might actually be beneficial\nif you want your synthetic data to cover some edge cases. For example, if you're\nusing the synthetic data to test insurance claim software, leaving in some weird\ndata points might help you ensure that the software can handle unexpected cases\n-- like the License Expiration accidentally being set too early.\n\nThe figure below shows a few questions you can ask to determine whether adding a\nconstraint is the right approach.\n\nShould you input a rule using constraints? First, determine whether the rule is\ndeterministic, and then take your use case into account.The SDV Constraints\noffering\n\nIf you decide that adding deterministic rules is important for generating your\nsynthetic data, the SDV has many different constraints to choose from! The table\nbelow describes the constraints you would need in order to define the\ndeterministic rules that would best mold your Car Insurance dataset.\n\nThe GreaterThan, ColumnFormula and Unique constraints -- all available in the\nSDV -- set the deterministic rules that ensure your synthetic Car Insurance Data\nis useful and makes sense.The SDV offers many more possible constraints,\nincluding:\n\n * UniqueCombinations\n * Positive and Negative\n * Rounding\n * Between\n * OneHotEncoding\n\nYou can add multiple constraints to the same dataset in order to accommodate all\nthe deterministic rules you need. For more details, read the Constraints User\nGuide [https://sdv.dev/SDV/user_guides/single_table/handling_constraints.html].\n\nTakeaways\nIn this article, we learned that:\n\n * Data is governed by rules. The SDV automatically learns probabilistic rules,\n   which describe overall trends or patterns in the data.\n * However, sometimes the data has deterministic rules, which are always\n   inherent no matter how much or how little data there is. ML-based systems,\n   including the SDV, may not enforce deterministic rules out of the box.\n * Users can input deterministic rules to the SDV using constraints. To figure\n   out whether you should input a constraint, ask yourself whether there are any\n   rules that the data must always follow. There are many constraints to choose\n   from.\n\nIn future articles, we'll dive deeper into this topic. We'll explore the\ntechnical details behind constraints, and how exactly the SDV's ML models are\nable to learn deterministic rules.","html":"<p>In our <a href=\"https://sdv.dev/blog/fake-to-synthetic-ml\">previous article</a>, we explored how machine learning (ML) plays a key role in synthetic data creation. One of the biggest strengths of ML is <em>automatic rule detection</em> (also known in ML terms as <em>correlations</em>): The algorithms are designed to learn patterns in the data, even without additional user input. The result is synthetic data that resembles the original, right down to its mathematical properties!</p><p>However, in some cases, applying an ML model right out of the box may not immediately achieve the desired result. In this article, we'll explore the strengths of ML models and go through those areas where user input may be required.</p><h3 id=\"strengths-of-ml-models\">Strengths of ML Models</h3><p>The goal of any ML-based synthetic data generation software is to learn from and emulate the input data. To illustrate this, let's pretend you work in the car insurance business, and you're in possession of a real dataset related to drivers and their insurance:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://sdv.ghost.io/content/images/2021/11/Figure-03.png\" class=\"kg-image\" alt=\"An example dataset, including license and collision coverage information associated with different drivers.\" loading=\"lazy\" width=\"1916\" height=\"835\" srcset=\"https://sdv.ghost.io/content/images/size/w600/2021/11/Figure-03.png 600w, https://sdv.ghost.io/content/images/size/w1000/2021/11/Figure-03.png 1000w, https://sdv.ghost.io/content/images/size/w1600/2021/11/Figure-03.png 1600w, https://sdv.ghost.io/content/images/2021/11/Figure-03.png 1916w\" sizes=\"(min-width: 720px) 720px\"><figcaption>An example dataset, including license and collision coverage information associated with different drivers.</figcaption></figure><p>An ML-based system, such as the <a href=\"https://sdv.dev/blog/intro-to-sdv/\">Synthetic Data Vault</a> (SDV), will learn patterns from the real data and use it to create new synthetic data. Recall some of the important patterns that ML algorithms detect:</p><ul><li><strong><strong><strong>Shapes. </strong></strong></strong>The general shape of the data. For example, in the dataset above, 50% of drivers have Collision Coverage and the Annual Premium is uniformly scattered between $3,000 and $9,000.</li><li><strong><strong><strong>Correlations.</strong> </strong></strong>The trends within the data. For example, having Collision Coverage -- especially Standard coverage -- means a higher Annual Premium.</li></ul><p>These shapes and correlations will be present in the synthetic data that is outputted by the ML model, as shown below.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://sdv.ghost.io/content/images/2021/11/Figure-04.png\" class=\"kg-image\" alt=\"An example of a synthetic dataset created by an ML-based algorithm. The algorithm will learn patterns from the real data and emulate them.\" loading=\"lazy\" width=\"1875\" height=\"832\" srcset=\"https://sdv.ghost.io/content/images/size/w600/2021/11/Figure-04.png 600w, https://sdv.ghost.io/content/images/size/w1000/2021/11/Figure-04.png 1000w, https://sdv.ghost.io/content/images/size/w1600/2021/11/Figure-04.png 1600w, https://sdv.ghost.io/content/images/2021/11/Figure-04.png 1875w\" sizes=\"(min-width: 720px) 720px\"><figcaption>An example of a synthetic dataset created by an ML-based algorithm. The algorithm will learn patterns from the real data and emulate them.</figcaption></figure><p>Perhaps <strong>the single biggest strength of an ML algorithm is its ability to learn rules by looking for general patterns in the data,</strong> using probability and statistics.</p><h3 id=\"what-ml-models-do-not-learn-out-of-the-box\">What ML models do not learn out of the box</h3><p>Let's take a closer look at the synthetic car insurance data. You might notice that two of the rows in the synthetic data don't make complete sense. Below, we've highlighted the errors.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://sdv.ghost.io/content/images/2021/11/Figure-05.png\" class=\"kg-image\" alt=\"The synthetic car insurance data, with errors highlighted. \" loading=\"lazy\" width=\"1867\" height=\"831\" srcset=\"https://sdv.ghost.io/content/images/size/w600/2021/11/Figure-05.png 600w, https://sdv.ghost.io/content/images/size/w1000/2021/11/Figure-05.png 1000w, https://sdv.ghost.io/content/images/size/w1600/2021/11/Figure-05.png 1600w, https://sdv.ghost.io/content/images/2021/11/Figure-05.png 1867w\" sizes=\"(min-width: 720px) 720px\"><figcaption>The synthetic car insurance data, with errors highlighted.</figcaption></figure><p>Do you see what has gone wrong? In the first row, the license expired 3 years earlier than it was issued. In the last row, a driver without Collision Coverage has a Collision Policy Type. Additionally, the same Customer ID has been repeated in Row 3 and Row 4.</p><p>There are three rules that the ML algorithm did not follow:</p><ol><li>License Expiration &gt; License Issue Year</li><li>If Has Collision Coverage = NO, then Collision Policy Type must be empty</li><li>All Customer IDs must be unique</li></ol><p>Why does the ML model easily pick up on some rules and not others? To answer this question, we can look closely at the rules themselves. All of the rules that the ML model successfully learned -- including the distribution shapes and the correlations -- were based on general trends. These <strong>probabilistic rules</strong> apply to a majority of the relationships within the dataset, but not all of them. Although they have to make sense in aggregate, a few rows may be exceptions.</p><p>By contrast, the rules that the ML model failed to learn were stricter. These <strong>deterministic rules</strong> describe intrinsic laws of nature, time or logic. Each and every row must adhere to them, and they won't change regardless of  how much (or how little) data has been given to the ML model.</p><p>To continue with the driving theme: A probabilistic rule is like a yield sign, signaling a general recommendation that works out differently for each individual situation -- some cars may need to stop, while others just slow down. Meanwhile, a deterministic rule is like a stop sign, demanding that every single car must come to a full stop.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://sdv.ghost.io/content/images/2021/11/Figure-06.png\" class=\"kg-image\" alt=\"A probabilistic rule applies to a majority of rows, but leaves room for exceptions. Meanwhile, a deterministic rule applies to every single row.\" loading=\"lazy\" width=\"1607\" height=\"662\" srcset=\"https://sdv.ghost.io/content/images/size/w600/2021/11/Figure-06.png 600w, https://sdv.ghost.io/content/images/size/w1000/2021/11/Figure-06.png 1000w, https://sdv.ghost.io/content/images/size/w1600/2021/11/Figure-06.png 1600w, https://sdv.ghost.io/content/images/2021/11/Figure-06.png 1607w\" sizes=\"(min-width: 720px) 720px\"><figcaption>A probabilistic rule applies to a majority of rows, but leaves room for exceptions. Meanwhile, a deterministic rule applies to every single row.</figcaption></figure><p><strong>By default, our ML model assumed that all rules were probabilistic.</strong> When this happens, synthetic data still generally follows the desired properties -- for example, License Expiration &gt; License Issue Year -- for <em>most</em> of the rows, but not for every row.</p><h3 id=\"improving-the-ml-models-using-constraints\">Improving the ML Models using constraints</h3><p>Just because the ML model didn't automatically follow a deterministic rule doesn't mean that it can't. It's possible to improve the model so that it understands this type of rule. As a user working with the SDV, you can input deterministic rules into your model using <strong>constraints</strong>.</p><p>An ML model built using constraints will accommodate both probabilistic and deterministic rules.</p><p><strong>Do you need SDV constraints?</strong></p><p>Deterministic rules are often easy to spot in your dataset: They are the rules that every single row must follow in order to be valid, regardless of how much data there is overall.  But even if you identify the right constraints, there are some cases where you might not actually want to supply them to the SDV.</p><p>Because the SDV learns probabilistic rules, most of the synthesized data is generally valid. Having a few errors sprinkled in might actually be beneficial if you want your synthetic data to cover some edge cases. For example, if you're using the synthetic data to test insurance claim software, leaving in some weird data points might help you ensure that the software can handle unexpected cases -- like the License Expiration accidentally being set too early.</p><p>The figure below shows a few questions you can ask to determine whether adding a constraint is the right approach.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://sdv.ghost.io/content/images/2021/12/Figure-07.png\" class=\"kg-image\" alt=\"Should you input a rule using constraints? First, determine whether the rule is deterministic, and then take your use case into account.\" loading=\"lazy\" width=\"2000\" height=\"586\" srcset=\"https://sdv.ghost.io/content/images/size/w600/2021/12/Figure-07.png 600w, https://sdv.ghost.io/content/images/size/w1000/2021/12/Figure-07.png 1000w, https://sdv.ghost.io/content/images/size/w1600/2021/12/Figure-07.png 1600w, https://sdv.ghost.io/content/images/size/w2400/2021/12/Figure-07.png 2400w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Should you input a rule using constraints? First, determine whether the rule is deterministic, and then take your use case into account.</figcaption></figure><p><strong>The SDV Constraints offering</strong></p><p>If you decide that adding deterministic rules is important for generating your synthetic data, the SDV has many different constraints to choose from! The table below describes the constraints you would need in order to define the deterministic rules that would best mold your Car Insurance dataset.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://sdv.ghost.io/content/images/2021/11/Figure-08.png\" class=\"kg-image\" alt=\"The GreaterThan, ColumnFormula and Unique constraints -- all available in the SDV -- set the deterministic rules that ensure your synthetic  Car Insurance Data is useful and makes sense.\" loading=\"lazy\" width=\"2000\" height=\"578\" srcset=\"https://sdv.ghost.io/content/images/size/w600/2021/11/Figure-08.png 600w, https://sdv.ghost.io/content/images/size/w1000/2021/11/Figure-08.png 1000w, https://sdv.ghost.io/content/images/size/w1600/2021/11/Figure-08.png 1600w, https://sdv.ghost.io/content/images/2021/11/Figure-08.png 2204w\" sizes=\"(min-width: 720px) 720px\"><figcaption>The GreaterThan, ColumnFormula and Unique constraints -- all available in the SDV -- set the deterministic rules that ensure your synthetic Car Insurance Data is useful and makes sense.</figcaption></figure><p>The SDV offers many more possible constraints, including:</p><ul><li>UniqueCombinations</li><li>Positive and Negative</li><li>Rounding</li><li>Between</li><li>OneHotEncoding</li></ul><p>You can add multiple constraints to the same dataset in order to accommodate all the deterministic rules you need. For more details, read the <a href=\"https://sdv.dev/SDV/user_guides/single_table/handling_constraints.html\">Constraints User Guide</a>.</p><h3 id=\"takeaways\">Takeaways</h3><p>In this article, we learned that:</p><ul><li>Data is governed by rules. The SDV automatically learns probabilistic rules, which describe overall trends or patterns in the data.</li><li>However, sometimes the data has <strong>deterministic rules</strong>, which are always inherent no matter how much or how little data there is. ML-based systems, including the SDV, may not enforce deterministic rules out of the box.</li><li>Users can input deterministic rules to the SDV using <strong>constraints</strong>. To figure out whether you should input a constraint, ask yourself whether there are any rules that the data must always follow. There are many constraints to choose from.</li></ul><p>In future articles, we'll dive deeper into this topic. We'll explore the technical details behind constraints, and how exactly the SDV's ML models are able to learn deterministic rules.<br></p>","url":"https://sdv.ghost.io/user-input-synthetic-data/","canonical_url":null,"uuid":"e72409d4-6d39-46dc-a973-3e5f9f039dd7","page":null,"codeinjection_foot":null,"codeinjection_head":null,"codeinjection_styles":null,"comment_id":"61a68d091b683e0048b2a2f3","reading_time":5}},"pageContext":{"slug":"user-input-synthetic-data"}},"staticQueryHashes":["2061773391","2358152166","2362887240","2439066133","2561578252","2657115718","2731221146","2839364760","4145280475"]}